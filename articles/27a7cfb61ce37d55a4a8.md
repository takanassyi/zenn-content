---
title: "React å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« (tic tac toe) ã®ä½œã‚Šæ–¹ã«ã²ã¨æ‰‹é–“åŠ ãˆã‚‹"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [react, typescript, storybook, materialui]
published: false
---

# ã¯ã˜ã‚ã«

- [React å…¬å¼ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://ja.reactjs.org/tutorial/tutorial.html) ã«ä¸‹è¨˜ã®è¦ç´ ã‚’è¿½åŠ 
  - TypeScript ã¸ã®æ›¸ãæ›ãˆ
  - Material-UI ã®é©ç”¨
  - Storybook ã®é©ç”¨
- Storybook ã¨ Atomic Design ã®è€ƒãˆæ–¹ã§ã€å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚²ãƒ¼ãƒ  Web ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰

# Before / After

## Before

![before](https://storage.googleapis.com/zenn-user-upload/cto7437i0lhq2phzzfbqmojibo87)

## After

![after](https://storage.googleapis.com/zenn-user-upload/drmtufwuhwknsgb5mvws04x8g3zq)

# å‹•ä½œç¢ºèªç’°å¢ƒ

## sw_vers

```
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
```

## node -v

```
v14.15.4
```

## yarn -v

```
1.22.10
```

## React é–‹ç™ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

- ä¸‹è¨˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ `yarn install`ã§å®Œæˆ(æ¯åº¦ã€ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™)

https://github.com/oukayuka/Riakuto-StartingReact-ja3.1/tree/master/06-lint/04-advanced

## Material-UI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- ã“ã‚Œã¨ã„ã£ã¦ç†ç”±ãŒã‚ã‚‹ã‚ã‘ã§ã¯ãªã„ãŒ `v5.0.0-alpha`(æœ€æ–°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆ) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

https://next.material-ui.com/

```
$ npm install @material-ui/core@next @emotion/react @emotion/styled
```

## Storybook ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- React ç”¨ã® Storybook ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

https://storybook.js.org/docs/react/get-started/install

```
$ npx sb init
```

## æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€å¼

- ä¸‹è¨˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ or ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ `yarn install` ã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒæ§‹ç¯‰å¯èƒ½

https://github.com/takanassyi/react-tutorial-ts-mui

# TypeScirpt ã¸ã®æ›¸ãæ›ãˆ

- å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã® TypeScript åŒ–ã¯ä¸‹è¨˜ã®ä¾‹ã‚’ã¯ã˜ã‚ã€Web ä¸Šã«æ§˜ã€…ãªä¾‹ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹
- è©³ç´°ã¯ [æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€å¼](#æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€å¼) å‚ç…§

https://zenn.dev/roiban/articles/473f9cbf2b793a

# Material-UI ã®é©ç”¨

- ãƒã‚¹ç›®ãŒ `<button>` ã§è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Material-UI ã® `<Button>` ã§è¡¨ç¾
- ãã®ä»–ã€å…¨ä½“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ•´ãˆã‚‹ãŸã‚ `<GenericTemplate>` ã®ä½¿ç”¨ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ•´ãˆã‚‹ãŸã‚ `<Grid>` ã‚’ä½¿ç”¨
- è©³ç´°ã¯ [æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€å¼](#æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€å¼) å‚ç…§

# Storybook ã®é©ç”¨

- Atomic Design ã®è€ƒãˆæ–¹ã§ã€å°ã•ã„ãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ä½œã‚Šä¸Šã’ã¦ã„ãã€å®Œæˆã—ãŸãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆã—ã¦ã€ã‚²ãƒ¼ãƒ ã‚’å®Œæˆã•ã›ã‚‹
- Storybook ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ãƒ†ã‚¹ãƒˆå¯èƒ½
- Atomic Design ã®è€ƒãˆæ–¹ã¯ä¸‹è¨˜å‚ç…§

https://design.dena.com/design/atomic-design-%E3%82%92%E5%88%86%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%A4%E3%82%82%E3%82%8A%E3%81%AB%E3%81%AA%E3%82%8B

## atoms

- ãƒã‚¹ç›®ã®ãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `<Button>` ã§è¡¨ç¾ã—ã¦ã„ã‚‹ãŸã‚ã€atoms ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« Square.tsx ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°
- `'O'`, `'X'`ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹ã¨ãã€ä½•ã‚‚é…ç½®ã•ã‚Œã¦ã„ãªã„ã¨ãã®`Square`ã‚’å®šç¾©(Squares.stories.tsx å‚ç…§)
- buttonStyle ã« ãƒã‚¹ç›®ã®ã‚µã‚¤ã‚ºã€å¤–è¦³ã‚’æŒ‡å®š
- Storybook ä¸Šã§æ›¸ãæ›ãˆãŒå¯èƒ½

### Square

:::details Storybook ç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Square)

```ts:Squares.stories.tsx
// also exported from '@storybook/react' if you can deal with breaking changes in 6.1
// eslint-disable-next-line import/no-extraneous-dependencies
import { Story, Meta } from '@storybook/react/types-6-0';
import { Square, SquareProps } from 'components/atoms/Square';
import { ButtonStyleType } from 'components/modules/interfaces';

export default {
  title: 'tictactoe/atoms/Square',
  component: Square,
} as Meta;

const Template: Story<SquareProps> = (args) => {
  const { value, onClick, buttonStyle, color } = args;

  return (
    <Square
      value={value}
      onClick={onClick}
      buttonStyle={buttonStyle}
      color={color}
    />
  );
};

const onClick = () => {
  // console.log('onclick');
};

const buttonStyle = {
  maxWidth: '50px',
  maxHeight: '50px',
  minWidth: '50px',
  minHeight: '50px',
  border: '1px solid #999',
  borderRadius: '1px',
} as ButtonStyleType;

export const SquareTestX = Template.bind({});
SquareTestX.args = {
  value: 'X',
  onClick,
  buttonStyle,
  color: 'secondary',
};

export const SquareTestO = Template.bind({});
SquareTestO.args = {
  value: 'O',
  onClick,
  buttonStyle,
  color: 'primary',
};

export const SquareTestNull = Template.bind({});
SquareTestNull.args = {
  value: null,
  onClick,
  buttonStyle,
  color: 'inherit',
};

```

:::

#### ä½•ã‚‚é…ç½®ã•ã‚Œã¦ã„ãªã„

![](https://storage.googleapis.com/zenn-user-upload/it87spm37wflowcd6y9p51v26j9i)

#### O ãŒé…ç½®ã•ã‚ŒãŸã¨ã

![](https://storage.googleapis.com/zenn-user-upload/i69s307pn1o4pf0irspl3vcw52b2)

#### X ãŒé…ç½®ã•ã‚ŒãŸã¨ã

![](https://storage.googleapis.com/zenn-user-upload/1ygyauzwxwqywjfdb50wv86mfonq)

## molecules

- `Square` ã®é›†åˆä½“ã¨ã—ã¦ 3x3 ã® `Board` ã‚’å®šç¾©
- ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã®åˆæœŸé…ç½®, 5 æ‰‹é€²ã‚ãŸçŠ¶æ…‹ã‚’ãƒ†ã‚¹ãƒˆ
- `squares` ã®çŠ¶æ…‹ã‚’æ›¸ãæ›ãˆã‚‹ã“ã¨ã§ã€ä»»æ„ã®æ‰‹æ•°ã®çŠ¶æ…‹ã‚’ Storybook ä¸Šã§å†ç¾å¯èƒ½
- `Moves` ã¯éå»ã®æ‰‹ã‚’é¡ã‚‹æ©Ÿèƒ½
- `history` éå»ã®ç›¤é¢ã®çŠ¶æ…‹ã‚’è¡¨ç¾(ã“ã®æ®µéšã§ã¯ã€`history` ã®ã‚µã‚¤ã‚ºã ã‘ã€orderd-list ãŒè¡¨ç¤ºã•ã‚Œã‚‹)

### Board

:::details Storybook ç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Board)

```ts:Board.stories.tsx
// also exported from '@storybook/react' if you can deal with breaking changes in 6.1
// eslint-disable-next-line import/no-extraneous-dependencies
import { Story, Meta } from '@storybook/react/types-6-0';
import { Board, BoardProps } from 'components/molecules/Board';
import { ButtonStyleType, SquareType } from 'components/modules/interfaces';

export default {
  title: 'tictactoe/molecules/Board',
  component: Board,
} as Meta;

const Template: Story<BoardProps> = (args) => {
  const { squares, onClick, buttonStyle } = args;

  return (
    <Board squares={squares} onClick={onClick} buttonStyle={buttonStyle} />
  );
};

const onClick = () => {
  // console.log('onclick');
};

const buttonStyle = {
  maxWidth: '50px',
  maxHeight: '50px',
  minWidth: '50px',
  minHeight: '50px',
  border: '1px solid #999',
  borderRadius: '1px',
} as ButtonStyleType;

const squaresInitial: SquareType[] = [
  null,
  null,
  null,
  null,
  null,
  null,
  null,
  null,
  null,
];

export const BoardTestInitial = Template.bind({});
BoardTestInitial.args = {
  squares: squaresInitial,
  onClick,
  buttonStyle,
};

const squares: SquareType[] = ['X', null, 'O', null, 'O', null, 'X', null, 'O'];

export const BoardTest = Template.bind({});
BoardTest.args = {
  squares,
  onClick,
  buttonStyle,
};
```

:::

#### åˆæœŸé…ç½®

![](https://storage.googleapis.com/zenn-user-upload/j9o1cla5ikaq68pi3ej2ajxeijnz)

#### 5 æ‰‹é€²ã‚ãŸä¾‹

![](https://storage.googleapis.com/zenn-user-upload/om1hhnaalxkurkqauja2mdkiqtv7)

### Moves

:::details Storybook ç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Moves)

```ts:Moves.stories.tsx
// also exported from '@storybook/react' if you can deal with breaking changes in 6.1
// eslint-disable-next-line import/no-extraneous-dependencies
import { Story, Meta } from '@storybook/react/types-6-0';
import { Moves, MovesProps } from 'components/molecules/Moves';
import { HistoryType } from 'components/modules/interfaces';

export default {
  title: 'tictactoe/molecules/Moves',
  component: Moves,
} as Meta;

const Template: Story<MovesProps> = (args) => {
  const { history, jumpTo } = args;

  return <Moves history={history} jumpTo={jumpTo} />;
};

const jumpTo = (): void => {
  // console.log("jumpTo");
};

const history = ([
  [null, null, null, null, null, null, null, null, null],
  ['X', null, null, null, null, null, null, null, null],
  ['X', 'O', null, null, null, null, null, null, null],
] as unknown) as HistoryType;

export const MovesTest = Template.bind({});
MovesTest.args = {
  jumpTo,
  history,
};

```

:::

#### 3 æ‰‹é€²ã‚ãŸä¾‹

![](https://storage.googleapis.com/zenn-user-upload/lgm82dmymqxx20zczly0qa9j1s02)

## organisms

- `Game`ã¯`Board`ã¨`Moves`ã®çµ„ã¿åˆã‚ã›ã§æ§‹æˆã•ã‚Œã‚‹ã‚²ãƒ¼ãƒ ç”»é¢
- ã“ã“ã§ã€ã‚²ãƒ¼ãƒ ã®ä¸€é€šã‚Šã®æ“ä½œãŒå¯èƒ½

### Game

:::details Storybook ç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Game)

```ts:Game.stories.tsx
// also exported from '@storybook/react' if you can deal with breaking changes in 6.1
// eslint-disable-next-line import/no-extraneous-dependencies
import { Story, Meta } from '@storybook/react/types-6-0';
import { Game } from 'components/organisms/Game';

export default {
  title: 'tictactoe/organisms/Game',
  component: Game,
} as Meta;

const Template: Story = () => <Game />;

export const GameTest = Template.bind({});

```

:::

![](https://storage.googleapis.com/zenn-user-upload/bu83e76v7umftpbhoncpmz54ja96)

## pages

- `Page`ã¯`Game`ã«å¯¾ã—ã€`GenericTemplate`ã‚’é©ç”¨ã—ãŸç”»é¢
- æœ€çµ‚çš„ãªè¦‹æ „ãˆã‚’ç¢ºèª

### Page

:::details Storybook ç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(Page)

```ts:Page.stories.tsx
// also exported from '@storybook/react' if you can deal with breaking changes in 6.1
// eslint-disable-next-line import/no-extraneous-dependencies
import { Story, Meta } from '@storybook/react/types-6-0';
import { Page } from 'components/pages/Page';

export default {
  title: 'tictactoe/pages/Page',
  component: Page,
} as Meta;

const Template: Story = () => <Page />;

export const PageTest = Template.bind({});
```

:::

![](https://storage.googleapis.com/zenn-user-upload/d1j4qob90s0e2c5gagivc6ls7ouy)

## è¡¨ç¤ºãƒ‡ãƒã‚¤ã‚¹ åˆ‡ã‚Šæ›¿ãˆ

- Storybook ã§ã¯ PC, ã‚¹ãƒãƒ›ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãªã©ãƒ‡ãƒã‚¤ã‚¹ã”ã¨ã®è¦‹ãˆæ–¹ã®é•ã„ã‚’ç¢ºèªã§ãã‚‹
- ä¸‹è¨˜ã¯ `Large Mobile(L) 896x414` ã«ãŠã„ã¦ã€ç¸¦æ¨ªã‚’å…¥ã‚Œæ›¿ãˆãŸã¨ãã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

### Large Mobile(L) 896x414 (æ¨ª)

![](https://storage.googleapis.com/zenn-user-upload/gb51g7r2k10ktllv9ho447vamogc)

### Large Mobile(L) 414x896 (ç¸¦)

![](https://storage.googleapis.com/zenn-user-upload/9y28ui8sf4qb4thkwtzw4eyjwhhr)

# ãŠã‚ã‚Šã«

- Storybook ã¨ Atomic Design ã®è€ƒãˆæ–¹ã§ã€ãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§é–‹ç™ºã—ã€å‡ºæ¥ä¸ŠãŒã£ãŸãƒ‘ãƒ¼ãƒ„ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦ã€å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚²ãƒ¼ãƒ  Web ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰
- ãã®ä»–ã®ã²ã¨æ‰‹é–“ã¨ã—ã¦ä¸‹è¨˜ã®ä¾‹
  - redux ã®é©ç”¨
  - ã‚²ãƒ¼ãƒ ã®ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã‚’ jest ã§å˜ä½“ãƒ†ã‚¹ãƒˆ
